<?xml version="1.0" encoding="UTF-8"?>

<filter>
  <definition>
    <category>users</category>
    <template>user-filter.tpl</template>
    <initial>true</initial>
  </definition>

  <search>
    <query>
      <backend>LDAP</backend>
      <filter>(&amp;(!(objectClass=gosaUserTemplate))(|$GENERIC$POSIX$MAIL$SAMBA)(|(cn=$NAME)(sn=$NAME)(givenName=$NAME)(uid=$NAME)))</filter>
      <attribute>dn</attribute>
      <attribute>objectClass</attribute>
      <attribute>givenName</attribute>
      <attribute>sn</attribute>
      <attribute>uid</attribute>
      <attribute>modifyTimestamp</attribute>
    </query>
    <query>
      <backend>LDAP</backend>
      <filter>(&amp;$TEMPLATE(|(cn=$NAME)(sn=$NAME)(givenName=$NAME)(uid=$NAME)))</filter>
      <attribute>dn</attribute>
      <attribute>objectClass</attribute>
      <attribute>givenName</attribute>
      <attribute>sn</attribute>
      <attribute>uid</attribute>
      <attribute>modifyTimestamp</attribute>
    </query>
    <base>true</base>
    <scope>auto</scope>
  </search>

  <element>
    <type>textfield</type>
    <tag>NAME</tag>
    <!--<regex>^...</regex>-->
    <alphabet>true</alphabet>
    <default>*</default>
    <unset>this is a not valid and failing filter</unset>
    <set>$</set>
    <autocomplete>
      <backend>LDAP</backend>
      <filter>(&amp;(objectClass=gosaAccount)(|(cn=*$NAME*)(sn=*$NAME*)(givenName=*$NAME*)(uid=*$NAME*)))</filter>
      <attribute>cn</attribute>
      <frequency>0.5</frequency>
      <characters>3</characters>
    </autocomplete>
  </element>

  <element>
    <type>checkbox</type>
    <tag>TEMPLATE</tag>
    <default></default>
    <unset>(&amp;(!(objectClass=gosaUserTemplate)(!(objectClass=gosaAccount))))</unset>
    <set>(objectClass=gosaUserTemplate)</set>
  </element>

  <element>
    <type>checkbox</type>
    <tag>GENERIC</tag>
    <default>true</default>
    <unset></unset>
    <set>(&amp;(objectClass=gosaAccount)(!(|(objectClass=posixAccount)(objectClass=gosaMailAccount)(objectClass=sambaSamAccount)(objectClass=gosaProxyAccount))))</set>
  </element>

  <element>
    <type>checkbox</type>
    <tag>POSIX</tag>
    <default>true</default>
    <unset></unset>
    <set>(objectClass=posixAccount)</set>
  </element>

  <element>
    <type>checkbox</type>
    <tag>MAIL</tag>
    <default>true</default>
    <unset></unset>
    <set>(objectClass=gosaMailAccount)</set>
  </element>

  <element>
    <type>checkbox</type>
    <tag>SAMBA</tag>
    <default>true</default>
    <unset></unset>
    <set>(objectClass=sambaSamAccount)</set>
  </element>

  <element>
    <type>combobox</type>
    <tag>ROLLE</tag>
    <unset></unset>
    <set></set>
    <default>*</default>
    <value>
      <key>*</key>
      <set>All</set>
      <set xml:lang="de">Alle</set>
    </value>
    <autocomplete>
      <backend>LDAP</backend>
      <base>dc=gonicus,dc=de</base>
      <scope>sub</scope>
      <category>roles</category>
      <objectbase>ou=roles</objectbase>
      <filter>(objectClass=organizationalRole)</filter>
      <attribute>cn</attribute>
      <key>cn</key>
    </autocomplete>
   </element>

</filter>
