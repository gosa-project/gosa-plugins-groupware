<?xml version="1.0" encoding="UTF-8"?>

<list>
  <definition>
    <departmentBrowser>true</departmentBrowser>
    <departmentRootVisible>false</departmentRootVisible>
    <baseMode>true</baseMode>
    <multiSelect>true</multiSelect>
    <template>user-list.tpl</template>
    <module>users</module>
    <label>List of users</label>
    <defaultSortColumn>1</defaultSortColumn>

    <objectType>
      <label>Users</label>
      <objectClass>person</objectClass>
      <category>users</category>
      <class>user</class>
      <image>plugins/users/images/select_user.png</image>
    </objectType>

  </definition>

  <table>
    <layout>|20px||260px|100px|120px|60px;c|140px;r|</layout>

    <department>
      <value>%{filter:objectType(dn,objectClass)}</value>
    </department>

    <department>
      <value>%{filter:departmentLink(row,dn,description)}</value>
      <span>5</span>
    </department>

    <column>
      <value>%{filter:objectType(dn,objectClass)}</value>
    </column>

    <column>
      <label>Given name</label>
      <sortAttribute>givenName</sortAttribute>
      <sortType>string</sortType>
      <value>%{filter:link(row,dn,"%s",givenName)}</value>
      <export>true</export>
    </column>

    <column>
      <label>Surname</label>
      <sortAttribute>sn</sortAttribute>
      <sortType>string</sortType>
      <value>%{filter:link(row,dn,"%s",sn)}</value>
      <export>true</export>
    </column>

    <column>
      <label>Actions</label>
      <value>%{filter:actions(dn,row,objectClass)}</value>
    </column>

  </table>

  <actionmenu>

    <action>
      <name>new</name>
      <type>entry</type>
      <image>plugins/users/images/list_new_user.png</image>
      <label>New person</label>
    </action>

    <action>
      <type>separator</type>
    </action>

    <action>
      <name>edit</name>
      <type>entry</type>
      <image>images/lists/edit.png</image>
      <label>Edit</label>
    </action>

    <action>
      <name>remove</name>
      <type>entry</type>
      <image>images/lists/trash.png</image>
      <label>Remove</label>
    </action>

    <action>
      <type>separator</type>
    </action>

    <action>
      <type>exporter</type>
    </action>
  </actionmenu>

  <actiontriggers snapshot="true" copypaste="true">
    <action>
      <name>provision</name>
      <type>entry</type>
      <objectclass>gosaAccount</objectclass>
      <image>images/lists/reload.png</image>
      <label>Provision all accounts</label>
    </action>

    <action>
      <name>edit</name>
      <type>entry</type>
      <objectclass>gosaAccount</objectclass>
      <image>images/lists/edit.png</image>
      <label>Edit person</label>
    </action>

    <action>
      <name>remove</name>
      <type>entry</type>
      <image>images/lists/trash.png</image>
      <objectclass>gosaAccount</objectclass>
      <acl>users/user[d]</acl>
      <label>Remove person</label>
    </action>

  </actiontriggers>

</list>
